<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0" />
    <title>Gamay Solarista</title>
    <link rel="stylesheet"
          href="styles.css" />
     <link rel="stylesheet"
          href="userbox.css" />
    <link rel="stylesheet"
          href="modal.css" />
      <style>
    /* Form container styling */
    .form-container {
      padding: 1em;
      max-width: 500px;
      margin: 2em auto;
      border: 1px solid #ddd;
      border-radius: 8px;
    }

    .form-container input,
    .form-container button {
      width: 100%;
      margin: 0.5em 0;
      padding: 0.5em;
    }

    #result {
      margin-top: 1em;
      padding: 1em;
      border: 1px solid #ccc;
      display: none;
      border-radius: 6px;
    }
  </style>
  </head>

  <body>

  <header class="site-header">
    <a href="index.html" class="logo">
      <img src="images/gamay_logo_brand.png" alt="Gamay Solarista Logo">
    </a>
    <div id="userBox" class="user-box"></div>
  </header>

    <!-- Icon Links Section -->
    <section class="icon-links" aria-label="Brand partners">
      <ul class="icongif-list">
        <li>
          <a href="#"
             id="openAbout">
            <img src="gif/solarista_about.gif" alt="About" />
            <span>About</span>
          </a>
        </li>
        <li>
          <a href="#"
             id="openContact">
            <img src="gif/solarista_contact.gif" alt="Contact" />
            <span>Contact</span>
          </a>
        </li>
        <li>
          <a href="#"
             id="openServices">
            <img src="gif/solarista_services.gif" alt="Services" />
            <span>Services</span>
          </a>
        </li>
        <li>
          <a href="#"
             id="openAchievements">
            <img src="gif/solarista_achievements.gif" alt="Achievements" />
            <span>Milestone</span>
          </a>
        </li>
        <li>
          <a href="#"
             id="openPortfolio">
            <img src="gif/solarista_portfolio.gif" alt="Portfolio" />
            <span>Portfolio</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- Main Hero Section -->
    <main class="heroMain">
      <video autoplay muted loop playsinline class="hero-video">
        <source src="webp/bg_main.webm" type="video/webm">
        Your browser does not support the video tag.
      </video>

      <div class="hero-text">
        <h2>Powering Tomorrow, Today</h2>
        <p>Affordable and sustainable solar solutions for every home.</p>
        <button class="btn" id="openLogin">Quote & Billing Forecast</button>
        <a href="quoteBilling.html" class="btn">Quote & Billing Forecast</a>
      </div>
    </main>

    <!-- Sticky Footer -->
    <footer class="footer">
      <p>¬© 2025 Gamay Solarista. All rights reserved.</p>
    </footer>

    <!-- Modals + Scripts remain unchanged -->
    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeAbout">&times;</span>
        <h2 class="modal-title">About Us</h2>
        <p>
          At Gamay Solarista, we are committed to making clean energy within reach of everyone. We specialize in
          delivering dependable, cost-effective solar installations tailored to each client. Our goal is to provide
          affordable and sustainable energy solutions that empower both households and businesses.
        </p>
      </div>
    </div>

    <!-- Services Modal -->
    <div id="servicesModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeServices">&times;</span>
        <h2 class="modal-title">Our Services</h2>
        <div class="service-cards">
          <div class="card">
            <div class="card-icon">üîÜ</div>
            <div class="card-info">
              <span class="title">Solar Panel Installation</span>
              <p>Custom-designed solar panel systems for your energy needs.</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">üîã</div>
            <div class="card-info">
              <span class="title">Battery Storage</span>
              <p>High-capacity battery solutions for energy independence.</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">‚ö°</div>
            <div class="card-info">
              <span class="title">Inverter Setup</span>
              <p>Efficient inverters to maximize solar energy use.</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">üõ†Ô∏è</div>
            <div class="card-info">
              <span class="title">Maintenance & Support</span>
              <p>Reliable service to keep your system running smoothly.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeContact">&times;</span>
        <h2 class="modal-title">Contact Us</h2>
        <div class="contact-cards">
          <div class="card">
            <div class="card-icon">üìç</div>
            <div class="card-info">
              <span class="title">Address</span>
              <p>Brgy. Burabod, Gamay Northern Samar, Philippines</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">üìû</div>
            <div class="card-info">
              <span class="title">Phone</span>
              <p>0927-513-2703</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">‚úâÔ∏è</div>
            <div class="card-info">
              <span class="title">Email</span>
              <p>gamaysolarista1987@gmail.com</p>
            </div>
          </div>
          <div class="card">
            <div class="card-icon">üåê</div>
            <div class="card-info">
              <span class="title">Website</span>
              <p>www.gamaysolarista.com</p>
            </div>
          </div>
        </div>
      </div>
    </div>

 <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeLogin">&times;</span>
      <h2 class="modal-title">Login</h2>
      <button id="googleLoginBtn" class="google-btn">Login with Google</button>
    </div>
  </div>

    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCTcS8HPQvSBDLyhmgZ1-SbRh6VTjMl1H0",
  authDomain: "gamay-solarista.firebaseapp.com",
  projectId: "gamay-solarista",
  storageBucket: "gamay-solarista.appspot.com",
  messagingSenderId: "84647601122",
  appId: "1:84647601122:web:d5fb855a45516c8b0ccfbb"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// ===== User handling =====
function getUser() {
  return JSON.parse(localStorage.getItem("user"));
}

function saveUser(user) {
  const userData = {
    name: user.displayName,
    email: user.email,
    photo: user.photoURL
  };
  localStorage.setItem("user", JSON.stringify(userData));
  showUser();
  autofillForm();
}

function showUser() {
  const userBox = document.getElementById("userBox");
  if (!userBox) return;

  const user = getUser();
  if (user) {
    userBox.innerHTML = `
      <img src="${user.photo}" alt="Profile">
      <span>${user.name}</span>
      <button id="logoutBtn">Logout</button>
    `;
    userBox.querySelector("img").addEventListener("click", () => userBox.classList.toggle("active"));
    document.getElementById("logoutBtn").addEventListener("click", logout);
  } else {
    userBox.innerHTML = `<button id="openLogin">Login</button>`;
    setupModal("openLogin", "loginModal", "closeLogin");
  }
}

function logout() {
  signOut(auth).then(() => {
    localStorage.removeItem("user");
    showUser();
  });
}

// ===== Autofill form =====
function autofillForm() {
  const user = getUser();
  if (!user) return;

  const nameInput = document.getElementById("customerName");
  const emailInput = document.getElementById("customerEmail");

  if (nameInput) nameInput.value = user.name;
  if (emailInput) emailInput.value = user.email;
}

// ===== Modal handling =====
function setupModal(openBtnId, modalId, closeBtnId) {
  const modal = document.getElementById(modalId);
  const openBtn = document.getElementById(openBtnId);
  const closeBtn = document.getElementById(closeBtnId);
  if (!modal || !openBtn || !closeBtn) return;

  openBtn.addEventListener("click", () => modal.classList.add("show"));
  closeBtn.addEventListener("click", () => modal.classList.remove("show"));
  window.addEventListener("click", e => {
    if (e.target === modal) modal.classList.remove("show");
  });
}

// ===== Google Login =====
function initGoogleLogin() {
  const googleBtn = document.getElementById("googleLoginBtn");
  if (!googleBtn) return;

  googleBtn.addEventListener("click", async () => {
    const provider = new GoogleAuthProvider();
    try {
      const result = await signInWithPopup(auth, provider);
      saveUser(result.user);
      document.getElementById("loginModal").classList.remove("show");
      window.location.href = "dashboard.html"; // redirect after login
    } catch (err) {
      console.error("Login failed:", err);
    }
  });
}

// ===== Quotation Calculator =====
function calculateQuotation() {
  const name = document.getElementById("customerName").value;
  const capacity = parseFloat(document.getElementById("capacity").value);
  const sunHours = parseFloat(document.getElementById("sunHours").value);
  const rate = parseFloat(document.getElementById("rate").value);
  const monthlyBill = parseFloat(document.getElementById("monthlyBill").value);

  const dailyKWh = capacity * sunHours;
  const monthlyKWh = dailyKWh * 30;
  const monthlySavings = monthlyKWh * rate;
  const annualSavings = monthlySavings * 12;
  const newBill = Math.max(0, monthlyBill - monthlySavings);
  const totalCost = capacity * 50000;
  const paybackPeriod = totalCost / monthlySavings || 0;
  const roi = (annualSavings / totalCost * 100) || 0;

  const resultBox = document.getElementById("result");
  resultBox.style.display = "block";
  resultBox.innerHTML = `
    <h3>Quotation for ${name}</h3>
    <p><b>System Capacity:</b> ${capacity} kW</p>
    <p><b>Estimated Daily Production:</b> ${dailyKWh.toFixed(2)} kWh</p>
    <p><b>Estimated Monthly Production:</b> ${monthlyKWh.toFixed(2)} kWh</p>
    <p><b>Current Monthly Bill:</b> ‚Ç±${monthlyBill.toLocaleString()}</p>
    <p><b>Estimated Savings Per Month:</b> ‚Ç±${monthlySavings.toFixed(2)}</p>
    <p><b>Estimated Annual Savings:</b> ‚Ç±${annualSavings.toFixed(2)}</p>
    <p><b>New Estimated Bill:</b> ‚Ç±${newBill.toFixed(2)}</p>
    <p><b>Total System Cost:</b> ‚Ç±${totalCost.toLocaleString()}</p>
    <p><b>Payback Period:</b> ${paybackPeriod.toFixed(1)} months</p>
    <p><b>ROI:</b> ${roi.toFixed(1)}% per year</p>
  `;
}

// ===== Initialize =====
window.addEventListener("DOMContentLoaded", () => {
  showUser();
  autofillForm();
  initGoogleLogin();

  // Setup other modals
  setupModal("openAbout", "aboutModal", "closeAbout");
  setupModal("openServices", "servicesModal", "closeServices");
  setupModal("openContact", "contactModal", "closeContact");
  setupModal("openLogin", "loginModal", "closeContact");

  // Expose calculator globally
  window.calculate = calculateQuotation;
});
</script>


  </body>
</html>














